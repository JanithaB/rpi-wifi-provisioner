# Listen only on wlan0 interface
interface=wlan0
listen-address=192.168.5.1
bind-interfaces

# Use Google DNS as upstream server (for Android compatibility)
no-resolv
server=8.8.8.8
server=8.8.4.4

# DHCP settings
dhcp-range=192.168.5.100,192.168.5.200,24h
dhcp-option=3,192.168.5.1
dhcp-option=6,192.168.5.1

# Captive portal detection - redirect these specific domains to our portal
# Android captive portal detection
address=/connectivitycheck.gstatic.com/192.168.5.1
address=/connectivitycheck.android.com/192.168.5.1
address=/clients3.google.com/192.168.5.1
address=/play.googleapis.com/192.168.5.1
address=/android.clients.google.com/192.168.5.1

# Apple captive portal detection
address=/captive.apple.com/192.168.5.1
address=/www.apple.com/192.168.5.1
address=/apple.com/192.168.5.1

# Microsoft/Windows captive portal detection
address=/www.msftconnecttest.com/192.168.5.1
address=/www.msftncsi.com/192.168.5.1
address=/ipv6.msftconnecttest.com/192.168.5.1

# Firefox captive portal detection
address=/detectportal.firefox.com/192.168.5.1

# Catch-all wildcard - redirect ALL domains to portal
# This ensures every HTTP request goes to our portal
address=/#/192.168.5.1

# Prevent DNS rebinding attacks
domain-needed
bogus-priv
stop-dns-rebind
rebind-localhost-ok